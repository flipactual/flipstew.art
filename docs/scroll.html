<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="base.css">
<title>Scroll</title>
<main>
  <h1>Scroll</h1>
  <p>Notes.app takes too long to open. So does everything else. Brain goes fast, but not in good way</p>
  <textarea cols="80" rows="20">
import SwiftUI

@main
struct ScrollApp: App {
    @Environment(\.scenePhase) var scenePhase
    @State var text: String = ""
    let file = FileManager.default.url(forUbiquityContainerIdentifier: "iCloud.art.flipstew.Scroll")!.appendingPathComponent("Documents").appendingPathComponent("Scroll.txt")
    func read() -> String {
        try? FileManager.default.startDownloadingUbiquitousItem(at: file)
        do { return try String(contentsOf: file, encoding: .utf8) } catch { return "" }
    }
    func write(_ text: String) {
        try? text.write(to: file, atomically: true, encoding: .utf8)
    }
    var body: some Scene {
        WindowGroup {
            ScrollView{
                TextEditor(text: $text)
                    .onChange(of: text) { write($0) }
                    .onChange(of: scenePhase) { if $0 == .active { text = read() } }
            }
        }
    }
}

  </textarea>
</main>
<footer><hr><a href="/">Home</a><aside>Last modified Friday, July 29, 2022</aside></footer>
